import matplotlib as mpl
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
import matplotlib.pyplot as plt

filename = "1"
def getData():
    accelerometerRecord = [[], [], [], []]
    buttonRecord = [[], []]

    f = open("./data/"+filename+'.txt', "r")
    fl = f.readlines()
    zero = 0
    for x in fl:
        m = x.split(',')
        if m[0] == "accelerometerRecord":
            if zero == 0 :
                zero = float(m[1].split('\n')[0]) #ms
            print(zero)
            accelerometerRecord[0].append(float(m[1]) - zero)
            accelerometerRecord[1].append(float(m[2]))
            accelerometerRecord[2].append(float(m[3]))
            accelerometerRecord[3].append(float(m[4].split('\n')[0]))
        elif m[0] == "buttonRecord":
            buttonRecord[0].append(float(m[1]))
            buttonRecord[1].append(float(m[2].split('\n')[0]))
    f.close()
    return accelerometerRecord, buttonRecord


def plot3d(x, y, z):
    mpl.rcParams['legend.fontsize'] = 10

    fig = plt.figure()
    ax = fig.gca(projection='3d')
    ax.plot(x, y, z, label='parametric curve')
    ax.legend()

    plt.show()


def plot(x, y,n,title):
    fig = plt.figure(n)
    plt.plot(x, y)
    fig.suptitle(title, fontsize=20)
    plt.xlabel('timestamp (ms)')
    plt.ylabel('acceleration (m⋅s−2)')
    plt.show()


def plot2(x1, y1, x2, y2, n):
    plt.figure(n)
    plt.grid(True)
    plt.plot(x1, y1, 'r')
    plt.plot(x2, y2, 'b')


accelerometerRecord, buttonRecord = getData()
plot3d(accelerometerRecord[1], accelerometerRecord[2], accelerometerRecord[3])

# plot(buttonRecord[0],buttonRecord[1])
plot( accelerometerRecord[0], accelerometerRecord[1], 1,filename+' X')
plot( accelerometerRecord[0], accelerometerRecord[2], 2, filename+' Y')
plot( accelerometerRecord[0], accelerometerRecord[3], 3,filename+' Z')
#plot2(buttonRecord[0], buttonRecord[1], accelerometerRecord[0], accelerometerRecord[1], 1)
#plot2(buttonRecord[0], buttonRecord[1], accelerometerRecord[0], accelerometerRecord[2], 2)
#plot2(buttonRecord[0], buttonRecord[1], accelerometerRecord[0], accelerometerRecord[3], 3)


plt.show()
